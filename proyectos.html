<!DOCTYPE html>
<html class="no-js">
<head lang="es">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="description" content="Portafolio online de un desarrollador web. Desarrollador front-end Antony Yale Ponce, creador de sitios webs atractivos, din√°micos e intuitivos.">
<meta name="keywords" content="Antony Yale Ponce, desarrollador web, programador junior, desarrollador front-end, dise√±ador web, portafolio">
<meta name="author" content="Antony Yale Ponce">

    <title>Proyectos - Yale Ponce Antony</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css">
    <link href="https://fonts.googleapis.com/css?family=Indie+Flower&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Oswald:300,400,500,600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
   
    <nav class="menu">
        <div class="foto">
            <p><img src="img/foto.jpg" alt="yale ponce" class="foto"></p>
        </div>
        <div class="contenedor contenedor-menu">
            <a href="index.html#sobre-mi">Sobre m√≠</a>
            <a href="#proyectos">Proyectos</a>
            <a href="index.html#conocimientos">Habilidades</a>
            <a href="index.html#contacto">Contacto</a>
            <button class="btn-login" id="btnLogin">Iniciar Sesi√≥n</button>
        </div>
    </nav>

    <header class="header">
        <div class="contenedor contenedor-header">
            <div class="nombre">
                <span class="fade-in">Mis Proyectos</span>
            </div>
            <h2 class="profesion">Un Programador Junior</h2>
        </div>
    </header>

    <main class="main">
        <section class="proyectos">
            <h2 class="titulo" id="proyectos">Algunos proyectos realizados</h2>
            <div class="contenedor contenedor-proyectos" id="listaProyectos"></div>
            
            <!-- Aqu√≠ se mostrar√° el PDF -->
            <div id="visorPDF" style="display:none; margin-top:20px; text-align:center;">
                <iframe id="pdfFrame" src="" width="100%" height="600px" style="border:1px solid #ccc;"></iframe>
            </div>
        </section>

        <script>
            // Inicializar GitHub Uploader
            const githubUploader = new GitHubUploader();
            
            // Cargar proyectos desde GitHub y localStorage
            async function cargarProyectos() {
                const contenedor = document.getElementById("listaProyectos");
                contenedor.innerHTML = "<p>Cargando proyectos desde GitHub...</p>";

                try {
                    // Intentar cargar desde GitHub primero
                    const config = JSON.parse(localStorage.getItem('githubConfig') || '{}');
                    let proyectos = [];
                    
                    if (config.token && config.username && config.repo) {
                        githubUploader.setConfig(config.token, config.username, config.repo);
                        proyectos = await githubUploader.getProjects();
                    }
                    
                    // Si no hay proyectos en GitHub, cargar del localStorage
                    if (proyectos.length === 0) {
                        proyectos = JSON.parse(localStorage.getItem("proyectos")) || [];
                    }

                    contenedor.innerHTML = "";

                    if (proyectos.length === 0) {
                        contenedor.innerHTML = "<p style='text-align: center; color: #666;'>No hay proyectos para mostrar.</p>";
                        return;
                    }

                    proyectos.forEach((p, index) => {
                        // Determinar si el PDF es una URL de GitHub o base64
                        const pdfUrl = p.pdf.startsWith('http') ? p.pdf : p.pdf;
                        const pdfDownload = p.pdf.startsWith('http') ? p.pdf : p.pdf;
                        
                        const githubIndicator = p.almacenadoEnGitHub ? 
                            '<p><small style="color: #27ae60;">üìÅ Almacenado en GitHub</small></p>' : 
                            '<p><small style="color: #e67e22;">üíæ Almacenamiento local</small></p>';
                        
                        contenedor.innerHTML += `
                            <div class="proyecto" data-aos="zoom-in" title="Semana: ${p.semana}">
                                <!-- üìå Imagen primero -->
                                <div class="foto">
                                    <img src="${p.imagen}" alt="${p.titulo}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE1MCIgZmlsbD0iI2RkZCIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM5OTkiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5JbWFnZW4gbm8gZGlzcG9uaWJsZTwvdGV4dD48L3N2Zz4='">
                                </div>

                                <!-- üìå Informaci√≥n -->
                                <div class="info">
                                    <h4>${p.titulo}</h4>
                                    <h5>Tecnolog√≠as utilizadas:</h5>
                                    <p>${p.tecnologias}</p>
                                    <p><em>${p.semana}</em></p>
                                    ${githubIndicator}
                                </div>

                                <!-- üìå Botones al final -->
                                <div class="botones">
                                    <button onclick="abrirPDF('${pdfUrl}', ${p.pdf.startsWith('data:')})" class="btn">üìÑ Ver PDF</button>
                                    <a href="${pdfDownload}" download="${p.titulo}.pdf" class="btn">‚¨áÔ∏è Descargar</a>
                                </div>
                            </div>`;
                    });
                    
                    // Inicializar AOS despu√©s de cargar los proyectos
                    AOS.refresh();
                    
                } catch (error) {
                    console.error('Error cargando proyectos:', error);
                    contenedor.innerHTML = "<p style='text-align: center; color: #e74c3c;'>Error al cargar los proyectos. Por favor, intenta m√°s tarde.</p>";
                }
            }

            function abrirPDF(url, isBase64) {
                try {
                    if (isBase64) {
                        // Manejar PDF base64 (c√≥digo original)
                        let byteCharacters = atob(url.split(',')[1]);
                        let byteNumbers = new Array(byteCharacters.length);
                        for (let i = 0; i < byteCharacters.length; i++) {
                            byteNumbers[i] = byteCharacters.charCodeAt(i);
                        }
                        let byteArray = new Uint8Array(byteNumbers);
                        let blob = new Blob([byteArray], { type: 'application/pdf' });
                        let urlBlob = URL.createObjectURL(blob);
                        window.open(urlBlob, '_blank');
                    } else {
                        // Manejar URL de GitHub (abrir directamente)
                        window.open(url, '_blank');
                    }
                } catch (error) {
                    console.error('Error abriendo PDF:', error);
                    alert('Error al abrir el PDF. Por favor, intenta descargarlo directamente.');
                }
            }

            // Cargar proyectos cuando la p√°gina est√© lista
            document.addEventListener('DOMContentLoaded', function() {
                cargarProyectos();
            });
        </script>

        <style>
            .proyecto {
                background: #191c32;
                padding: 15px;
                border-radius: 12px;
                color: #fff;
                margin: 15px 0;
                text-align: center;
                box-shadow: 0 4px 12px rgba(0,0,0,0.4);
                transition: transform 0.3s;
            }

            .proyecto:hover {
                transform: scale(1.03);
            }

            /* üìå Imagen primero */
            .proyecto .foto img {
                max-width: 100%;
                height: auto;
                border-radius: 10px;
                margin-bottom: 15px;
                box-shadow: 0 3px 10px rgba(0,0,0,0.5);
            }

            .info h4 {
                margin-bottom: 8px;
                font-size: 1.3em;
            }

            .info h5 {
                margin: 5px 0;
                font-weight: bold;
                color: #ff4c4c;
            }

            .info p {
                margin: 5px 0;
            }

            /* üìå Botones al final */
            .botones {
                margin-top: 15px;
                display: flex;
                justify-content: center;
                gap: 12px;
            }

            .btn {
                display: inline-block;
                padding: 8px 16px;
                border-radius: 6px;
                text-decoration: none;
                font-weight: bold;
                background: #ff4c4c;
                color: #fff;
                transition: 0.3s;
                cursor: pointer;
                border: none;
            }

            .btn:hover {
                background: #ff1c1c;
            }
        </style>
    </main>

    <footer class="footer">
        <div class="contenedor">
            <div class="redes-sociales" id="contacto">
                <a href="https://www.linkedin.com/feed/?trk=onboarding-landing target=" class="social linkedin"
                    title="Linkedin"><i class="fab fa-linkedin-in"></i></a>
                <a href="#" target="_blank" class="social instagram" title="Instagram"><i
                        class="fab fa-instagram"></i></a>
                
                <a href="#" target="_blank"
                    class="social youtube" title="YouTube"><i class="fab fa-youtube"></i></a>
                <a href=https://github.com/AntonyYtz/portafolio_yale target="_blank" class="social github" title="GitHub"><i
                        class="fab fa-github"></i></a>
            </div>
        </div>
        <p class="autor">Yale Ponce Antony - 2025</p>
        <span><i class="boton-arriba fa fa-chevron-up" id="boton-arriba" aria-hidden="true"></i></span>
    </footer>

    <!-- üîπ Modal Login -->
    <div id="loginModal">
        <div id="loginBox">
            <h3>Iniciar Sesi√≥n</h3>
            <input type="text" id="username" placeholder="Usuario">
            <input type="password" id="password" placeholder="Contrase√±a">
            <button onclick="login()">Entrar</button>
            <p id="loginError">Usuario o contrase√±a incorrectos</p>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script src="js/main.js"></script>
    <script src="js/lightbox-plus-jquery.min.js"></script>
    <script src="js/t.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/baffle@0.3.6/dist/baffle.min.js"></script>
    <script src="js/github-api.js"></script>

    <script>
        // Abrir modal
        document.getElementById("btnLogin").addEventListener("click", () => {
            document.getElementById("loginModal").style.display = "flex";
        });

        // Login simple
        function login() {
            const user = document.getElementById("username").value;
            const pass = document.getElementById("password").value;

            if (user === "admin" && pass === "123456") {
                localStorage.setItem("logged", "true");
                alert("Bienvenido " + user);
                window.location.href = "admin.html"; // tu panel privado
            } else {
                document.getElementById("loginError").style.display = "block";
            }
        }

        // Cerrar modal al hacer click fuera
        window.addEventListener("click", (e) => {
            if (e.target === document.getElementById("loginModal")) {
                document.getElementById("loginModal").style.display = "none";
            }
        });
    </script>
</body>

</html>
